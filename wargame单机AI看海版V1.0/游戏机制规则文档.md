# 第二次布匿战争 - 战略游戏机制规则文档

## 📋 目录
1. [游戏概述](#游戏概述)
2. [派系系统](#派系系统)
3. [回合机制](#回合机制)
4. [军队系统](#军队系统)
5. [城市系统](#城市系统)
6. [战斗系统](#战斗系统)
7. [外交系统](#外交系统)
8. [AI控制系统](#ai控制系统)
9. [手动操作功能](#手动操作功能)
10. [游戏管理](#游戏管理)

---

## 游戏概述

### 游戏背景
- **历史时期**：第二次布匿战争（公元前218年）
- **游戏类型**：回合制大战略游戏
- **地图范围**：地中海世界（西班牙、高卢、意大利、西西里、北非、巴尔干、希腊、小亚细亚、黎凡特、埃及）

### 游戏目标
- 控制关键城市，获取政治和经济分数
- 通过军事、外交、经济手段扩张势力
- 达成派系特定的战略目标

---

## 派系系统

### 可玩派系（5个）

#### 1. 罗马 (Rome)
- **颜色**：红色 (#e74c3c)
- **首都**：罗马 (Rome)
- **起始区域**：意大利
- **特点**：强大的步兵军团，防御性战略

#### 2. 迦太基 (Carthage)
- **颜色**：紫色 (#9b59b6)
- **首都**：迦太基 (Carthage)
- **起始区域**：北非、西班牙
- **特点**：战象部队，进攻性战略

#### 3. 马其顿 (Macedonia)
- **颜色**：蓝色 (#3498db)
- **首都**：佩拉 (Pella)
- **起始区域**：巴尔干、希腊
- **特点**：方阵步兵，多战略模式

#### 4. 塞琉古 (Seleucid)
- **颜色**：青绿色 (#16a085)
- **首都**：安条克 (Antioch)
- **起始区域**：小亚细亚、黎凡特
- **特点**：混合部队，多战略模式

#### 5. 托勒密 (Ptolemy)
- **颜色**：金色 (#f39c12)
- **首都**：亚历山大 (Alexandria)
- **起始区域**：埃及
- **特点**：富裕经济，多战略模式

---

## 回合机制

### 回合顺序
1. **罗马回合** → 2. **迦太基回合** → 3. **马其顿回合** → 4. **塞琉古回合** → 5. **托勒密回合**

### 回合阶段
每个派系的回合包含以下阶段：

#### 1. 收入阶段
- 根据控制的城市获得资金
- 政治分 × 10 + 经济分 × 20 = 每回合收入

#### 2. 行动阶段
- 移动军队
- 攻击敌对城市
- 围攻城市
- 进行外交

#### 3. 战斗阶段
- 自动触发会战（当军队移动到敌对城市）
- 围城战（持续围攻）

#### 4. 结束阶段
- 更新城市状态
- 计算分数
- 检查胜利条件

### 回合控制
- **暂停/继续**：可随时暂停游戏
- **结束回合**：手动结束当前派系回合
- **看海模式**：AI自动执行所有回合

---

## 军队系统

### 军队组成

#### 兵种类型
1. **轻骑兵** (Light Cavalry)
   - 快速机动，适合侦察和追击
   
2. **重骑兵** (Heavy Cavalry)
   - 冲击力强，适合突破

3. **轻步兵** (Light Infantry)
   - 灵活机动，适合骚扰

4. **重步兵** (Heavy Infantry)
   - 防御力强，主力作战单位

5. **弓箭手** (Archers)
   - 远程攻击，支援作战

6. **战象** (War Elephants) - 仅迦太基
   - 强大冲击力，震慑敌军

### 将领属性

每支军队由一名将领指挥，拥有三项属性：

#### 1. 军事能力 (Military)
- **范围**：1-10
- **影响**：战斗力加成、战术选择
- **重要性**：直接影响战斗胜率

#### 2. 政治能力 (Political)
- **范围**：1-10
- **影响**：外交成功率、城市忠诚度
- **重要性**：影响外交和内政

#### 3. 外交能力 (Diplomatic)
- **范围**：1-10
- **影响**：谈判成功率、联盟维持
- **重要性**：影响外交关系

### 军队行动

#### 移动
- **移动范围**：通过道路连接的相邻城市
- **陆路**：普通道路（黄色线）
- **海路**：海上航线（蓝色虚线）
- **限制**：每回合只能移动一次

#### 攻击
- **会战**：军队移动到敌对城市自动触发
- **围城**：对有防御工事的城市进行围攻
- **撤退**：战斗失败可能导致军队撤退

#### 补给
- **士气**：影响战斗表现
- **补给线**：需要保持与己方城市的连接
- **损耗**：长期围城会降低士气

---

## 城市系统

### 城市属性

#### 1. 政治分数 (Political Score)
- **范围**：0-10
- **影响**：每回合收入（×10）
- **获取**：占领城市、外交影响

#### 2. 经济分数 (Economic Score)
- **范围**：0-10
- **影响**：每回合收入（×20）
- **获取**：贸易、发展城市

#### 3. 工事等级 (Fortification Level)
- **范围**：0-5
- **影响**：防御力、围城时间
- **0级**：无防御，直接占领
- **1-5级**：需要围城，等级越高越难攻克

#### 4. 派系态度 (Faction Attitude)
- **范围**：-100 到 +100
- **影响**：外交关系、城市忠诚度
- **变化**：通过外交、军事行动改变

### 城市状态

#### 归属状态
- **己方控制**：显示派系颜色
- **中立**：灰色显示
- **敌对**：显示敌对派系颜色

#### 围城状态
- **围城中**：显示围城方和围城回合数
- **围城时间**：工事等级 × 2 回合
- **突破**：围城成功后占领城市

### 城市区域

游戏地图分为10个主要区域：

1. **西班牙** (Spain) - 8个城市
2. **高卢** (Gaul) - 4个城市
3. **意大利** (Italy) - 8个城市
4. **西西里** (Sicily) - 3个城市
5. **北非** (North Africa) - 8个城市
6. **巴尔干** (Balkans) - 3个城市
7. **希腊** (Greece) - 4个城市
8. **小亚细亚** (Asia Minor) - 7个城市
9. **黎凡特** (Levant) - 5个城市
10. **埃及** (Egypt) - 2个城市

---

## 战斗系统

### 会战机制

#### 触发条件
- 军队移动到敌对城市
- 城市无防御工事或围城成功

#### 战斗流程
1. **双方部署**：自动部署军队
2. **战斗计算**：基于兵力、将领能力、士气
3. **战斗结果**：胜利/失败/平局
4. **损失计算**：双方损失兵力

#### 战斗因素
- **兵力对比**：数量优势
- **兵种克制**：骑兵克步兵，步兵克弓箭手等
- **将领能力**：军事属性加成
- **士气**：影响战斗表现
- **地形**：防御方有地形优势

### 围城战

#### 围城流程
1. **开始围城**：军队到达有工事的城市
2. **围城计数**：每回合+1
3. **突破判定**：达到所需回合数
4. **攻城战**：触发最终战斗
5. **占领/失败**：根据战斗结果

#### 围城时间
- **工事等级 × 2 = 所需回合数**
- 例：3级工事需要6回合

---

## 外交系统

### 联盟机制

#### 联盟类型
1. **与罗马结盟**
2. **与迦太基结盟**
3. **保持中立**

#### 联盟效果
- **军事支援**：可能获得援军
- **经济支援**：贸易加成
- **外交保护**：减少被攻击概率
- **态度加成**：提升相关派系态度

#### 联盟条件
- 派系态度 > 50
- 外交谈判成功
- 支付外交成本

### 态度系统

#### 态度范围
- **+100 到 +50**：友好
- **+50 到 0**：中立偏好
- **0 到 -50**：中立偏恶
- **-50 到 -100**：敌对

#### 态度影响因素
- **军事行动**：攻击降低态度
- **外交行动**：外交提升态度
- **联盟关系**：联盟提升态度
- **历史关系**：初始态度设定

---

## AI控制系统

### AI类型

#### 1. 罗马AI
- **策略**：防御为主，巩固意大利
- **优先级**：保护首都 > 扩张 > 外交

#### 2. 迦太基AI
- **策略**：进攻为主，汉尼拔战略
- **优先级**：攻击罗马 > 控制西班牙 > 海上贸易

#### 3. 马其顿AI（5种战略模式）
- **亚历山大模式**：全面扩张
- **叙拉古模式**：西进意大利
- **罗马模式**：与罗马结盟
- **安条克模式**：东进小亚细亚
- **迦太基模式**：与迦太基结盟

#### 4. 塞琉古AI（5种战略模式）
- **亚历山大模式**：重建帝国
- **叙拉古模式**：西进地中海
- **罗马模式**：与罗马结盟
- **安条克模式**：巩固东方
- **迦太基模式**：与迦太基结盟

#### 5. 托勒密AI（5种战略模式）
- **亚历山大模式**：扩张埃及
- **叙拉古模式**：控制地中海
- **罗马模式**：与罗马结盟
- **安条克模式**：对抗塞琉古
- **迦太基模式**：与迦太基结盟

### AI行为

#### 决策优先级
1. **防御首都**：优先级最高
2. **攻击敌对城市**：扩张领土
3. **外交行动**：建立联盟
4. **经济发展**：提升城市分数
5. **军队调动**：战略部署

#### AI特性
- **自动执行**：可开启AI自动执行回合
- **战略切换**：可手动切换AI战略模式
- **看海模式**：全自动AI对战

---

## 手动操作功能

### 手动生成军队

#### 操作流程
1. 点击"✨ 手动生成军队"按钮
2. 选择派系（罗马/迦太基/马其顿/塞琉古/托勒密）
3. 选择地区或使用默认首都
4. 选择具体城市
5. 输入将领信息：
   - 将领姓名
   - 军事能力（1-10，默认5）
   - 政治能力（1-10，默认5）
   - 外交能力（1-10，默认5）
6. 确认创建

#### 默认设置
- **位置**：派系首都
- **将领属性**：全部5
- **兵力**：标准配置

### 手动增加资金

#### 操作流程
1. 点击"💰 手动增加资金"按钮
2. 选择派系
3. 输入金额（默认2000）
4. 查看当前资金
5. 确认增加

#### 功能特点
- 实时显示当前资金
- 可自定义任意金额
- 添加操作日志

### 修改将领属性

#### 操作流程
1. 点击"⚔️ 修改将领属性"按钮
2. 选择派系
3. 从军队列表中选择要修改的军队
4. 查看当前属性
5. 输入新属性值（1-10）
6. 确认修改

#### 默认行为
- **留空**：当前值+1（最大10）
- **输入值**：设置为指定值（1-10范围）
- **智能限制**：不会超过10或低于1

---

## 游戏管理

### 游戏控制

#### 回合控制
- **⏸️ 暂停/继续**：暂停或继续游戏
- **⏭️ 结束回合**：手动结束当前回合
- **🍿 看海模式**：AI自动执行所有回合

#### AI控制
- **启用/禁用AI**：为每个派系独立控制
- **切换战略**：为马其顿/塞琉古/托勒密切换战略模式
- **⚡ 立即执行AI**：立即执行当前派系AI

#### 游戏设置
- **🎮 看海模式自动结束**：勾选后塞琉古回合自动结束
- **🎖️ 限制军队数量**：勾选后每派系最多5支军队

### 存档管理

#### 保存游戏
- 保存当前游戏状态到本地存储
- 包含所有派系、军队、城市数据

#### 加载游戏
- 从本地存储加载之前保存的游戏
- 恢复所有游戏状态

#### 重置游戏
- 重置到初始状态（公元前218年）
- 清除所有进度

### 坐标管理

#### 修复坐标
- 自动修复城市和军队位置偏移

#### 导出坐标
- 导出当前城市坐标数据为JSON

#### 导入坐标
- 从JSON文件导入坐标数据

---

## 背景音乐

### 音乐控制

#### 播放控制
- **▶️/⏸️ 播放/暂停**：控制音乐播放
- **自动播放**：游戏打开后自动播放
- **循环播放**：音乐无限循环

#### 音量控制
- **音量滑块**：拖动调节音量（0-100%）
- **实时显示**：显示当前音量百分比
- **默认音量**：50%

#### 音乐信息
- **曲目**：Divinitus
- **类型**：史诗背景音乐

---

## 界面说明

### 主界面布局

#### 左侧：地图区域
- **城市标记**：显示所有城市位置和归属
- **军队标记**：显示所有军队位置
- **道路网络**：显示城市间连接
- **悬浮提示**：鼠标悬停显示详细信息

#### 右侧：控制面板
1. **游戏信息**：回合数、当前派系、年份
2. **派系分数**：各派系政治分、经济分、总分
3. **联盟状态**：各派系联盟关系
4. **AI控制**：AI开关和战略选择
5. **手动操作**：生成军队、增加资金、修改将领
6. **游戏管理**：保存、加载、重置
7. **背景音乐**：音乐控制和音量调节

### 悬浮提示

#### 城市提示
- 城市名称
- 派系归属
- 政治分数
- 经济分数
- 工事等级
- 对各派系态度
- 围城状态（如有）

#### 军队提示
- 将领姓名
- 所在城市
- 军事/政治/外交能力
- 各兵种数量
- 总兵力
- 士气状态

---

## 胜利条件

### 分数胜利
- 达到指定总分（政治分 + 经济分）
- 控制关键城市

### 军事胜利
- 占领所有敌对派系首都
- 消灭所有敌对军队

### 外交胜利
- 建立强大联盟网络
- 控制大部分中立城市

---

## 游戏技巧

### 战略建议

#### 罗马
1. 巩固意大利半岛
2. 防御迦太基入侵
3. 逐步扩张西西里和北非

#### 迦太基
1. 快速攻击罗马
2. 保持西班牙控制
3. 利用战象优势

#### 马其顿
1. 选择合适战略模式
2. 平衡东西扩张
3. 利用外交优势

#### 塞琉古
1. 巩固东方领土
2. 选择扩张方向
3. 发展经济基础

#### 托勒密
1. 保护埃及核心
2. 控制地中海贸易
3. 灵活外交策略

### 战术建议

#### 军事
- 集中优势兵力
- 选择有利地形
- 保持补给线
- 培养优秀将领

#### 外交
- 建立战略联盟
- 孤立主要敌人
- 提升城市态度
- 利用外交缓冲

#### 经济
- 优先发展经济城市
- 保护贸易路线
- 平衡军事和经济投入
- 合理使用资金

---

## 快捷操作

### 键盘快捷键
- **空格**：暂停/继续
- **Enter**：结束回合
- **ESC**：关闭弹窗

### 鼠标操作
- **左键点击城市**：查看城市详情
- **左键点击军队**：选择军队
- **左键点击目标城市**：移动军队
- **右键**：取消选择
- **鼠标悬停**：显示详细信息

---

## 版本信息

- **游戏版本**：看海版单机AI版
- **历史背景**：第二次布匿战争（公元前218年）
- **开发特色**：完整AI系统、多战略模式、手动操作功能

---

## 更新日志

### 最新功能
1. ✅ 手动生成军队功能
2. ✅ 手动增加资金功能
3. ✅ 修改将领属性功能
4. ✅ 背景音乐系统
5. ✅ 音量控制功能
6. ✅ 多战略AI模式（马其顿/塞琉古/托勒密）
7. ✅ 看海模式自动循环
8. ✅ 军队数量限制选项

---

## 常见问题

### Q: 如何开始游戏？
A: 游戏自动开始，从罗马回合开始。可以启用AI让电脑控制，或手动操作。

### Q: 如何移动军队？
A: 点击军队选择，然后点击目标城市（必须通过道路连接）。

### Q: 如何攻击城市？
A: 移动军队到敌对城市即可自动触发战斗。

### Q: 围城需要多久？
A: 工事等级 × 2 回合。例如3级工事需要6回合。

### Q: 如何切换AI战略？
A: 在AI控制面板中，点击对应派系的战略按钮。

### Q: 看海模式是什么？
A: 全自动AI对战模式，所有派系由AI控制并自动执行回合。

### Q: 如何调节音量？
A: 在背景音乐栏目中拖动音量滑块。

### Q: 游戏数据会保存吗？
A: 需要手动点击"保存游戏"按钮保存到本地存储。

---

**文档版本**：1.0  
**最后更新**：2025年10月17日  
**游戏类型**：回合制大战略游戏  
**历史背景**：第二次布匿战争
