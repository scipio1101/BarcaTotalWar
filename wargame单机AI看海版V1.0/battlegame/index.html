<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>巴卡：全面战争（会战界面）</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1 class="game-title">巴卡：全面战争（会战界面）</h1>
            <h2>罗马 vs 迦太基</h2>
        </div>

        <div class="phase-bar">
            <div class="current-player-info">
                当前回合: <span id="current-player-text" class="rome">罗马</span>
            </div>
            <div class="phase-info">
                <span id="current-phase-text">阶段: 规划和移动</span>
            </div>
        </div>

        <div class="main-game-layout">
            <div class="game-board">
                <div class="square-grid-background"></div>
                <div id="square-grid" class="square-grid"></div>
            </div>

            <div class="game-info">
                <div id="phase-status-info" style="margin-bottom: 12px; padding: 12px; background: linear-gradient(135deg, rgba(52, 152, 219, 0.15), rgba(155, 89, 182, 0.15)); border-radius: 10px; border: 2px solid rgba(52, 152, 219, 0.4); text-align: center; font-weight: bold; font-size: 14px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
                    <div style="color: #3498db; margin-bottom: 5px; font-size: 13px;">当前回合</div>
                    <div id="sidebar-player-text" class="rome" style="font-size: 18px; margin-bottom: 10px; text-shadow: 0 0 10px rgba(231, 76, 60, 0.3);">🏛️ 罗马</div>
                    <div style="color: #3498db; margin-bottom: 5px; font-size: 13px;">当前阶段</div>
                    <div id="sidebar-phase-text" style="font-size: 16px; color: white; font-weight: bold; text-shadow: 1px 1px 3px rgba(0,0,0,0.5);">📦 部署阶段</div>
                </div>
                <div class="control-buttons">
                    <button id="add-step-btn" class="btn" style="display: none;">添加步骤</button>
                    <button id="finish-plan-btn" class="btn" style="display: none;">完成单位规划</button>
                    <button id="execute-plan-btn" class="btn" style="display: none;">执行移动</button>
                    <button id="cancel-move-btn" class="btn" style="display: none;">取消</button>
                    <button id="finish-all-plans-btn" class="btn" style="display: none;">完成所有规划</button>
                    <button id="execute-all-btn" class="btn" style="display: none;">统一执行</button>
                    <button id="finish-attacker-support-btn" class="btn" style="display: none;">完成攻击方支援选择</button>
                    <button id="finish-defender-support-btn" class="btn" style="display: none;">完成防守方支援选择</button>
                    <button id="defender-retreat-btn" class="btn" style="display: none; background: #e74c3c;">选择撤退</button>
                    <button id="defender-stand-btn" class="btn" style="display: none; background: #27ae60;">坚守战斗</button>
                    <button id="execute-charge-btn" class="btn" style="display: none;">执行冲锋</button>
                    <button id="confirm-ranged-attack-btn" class="btn" style="display: none; background: linear-gradient(135deg, #e67e22, #d35400);">🏹 确认射击</button>
                    <button id="next-phase-btn" class="btn">下一阶段</button>
                    <button id="confirm-deployment-btn" class="btn" style="display: none;">确认部署</button>
                    <button id="toggle-unit-info-btn" class="btn" style="background: linear-gradient(135deg, #16a085, #1abc9c);">👁️ 隐藏单位信息</button>
                    <button id="save-game-btn" class="btn" style="background: linear-gradient(135deg, #27ae60, #229954);">💾 保存游戏</button>
                    <button id="load-game-btn" class="btn" style="background: linear-gradient(135deg, #8e44ad, #9b59b6);">📂 载入游戏</button>
                    <button id="reset-btn" class="btn">重新开始</button>
                </div>
                <div id="dice-result" style="display: none; text-align: center; margin-top: 10px; font-size: 16px; padding: 10px; background: #f8f9fa; border: 2px solid #3498db; border-radius: 8px; color: #2c3e50; font-weight: bold;"></div>
                
                <div class="game-log">
                    <h3 style="margin-top: 0; color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 5px;">📜 游戏日志</h3>
                    <div id="game-log-content" style="height: 300px; overflow-y: auto; padding: 10px; background: #f8f9fa; border: 1px solid #bdc3c7; border-radius: 5px; font-size: 14px; line-height: 1.4; color: #2c3e50;">
                        <div style="color: #7f8c8d; font-style: italic;">游戏开始，等待行动...</div>
                    </div>
                </div>
                
                <div class="unit-info">
                    <div id="selected-unit-info">选择一个单位查看详情</div>
                    <div class="faction-stats">
                        <div class="faction-stat">
                            <span class="faction-label rome">🏛️ 罗马</span>
                            <span id="rome-count">6</span>
                        </div>
                        <div class="faction-stat">
                            <span class="faction-label carthage">🌊 迦太基</span>
                            <span id="carthage-count">6</span>
                        </div>
                    </div>
                </div>

                <div class="game-stats">
                    <div class="faction-stats rome">
                        <h3>罗马</h3>
                        <div id="rome-units">分值: <span id="rome-count-bottom">4</span></div>
                    </div>
                    <div class="faction-stats carthage">
                        <h3>迦太基</h3>
                        <div id="carthage-units">分值: <span id="carthage-count-bottom">4</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 胜负结算弹窗 -->
    <div id="victory-modal" class="victory-modal">
        <div class="victory-modal-content">
            <div class="victory-banner">
                <div id="victory-icon" class="victory-icon"></div>
                <h1 id="victory-title" class="victory-title"></h1>
            </div>
            <div class="victory-details">
                <h2>战斗结算</h2>
                <div class="faction-result">
                    <div class="result-row rome-result">
                        <span class="faction-name">🏛️ 罗马</span>
                        <span id="rome-final-score" class="faction-score"></span>
                    </div>
                    <div class="result-row carthage-result">
                        <span class="faction-name">🌊 迦太基</span>
                        <span id="carthage-final-score" class="faction-score"></span>
                    </div>
                </div>
                <div id="victory-message" class="victory-message"></div>
                
                <!-- 战后影响 -->
                <div class="battle-aftermath" style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px;">
                    <h3 style="margin-top: 0; color: #3498db; font-size: 16px;">⚔️ 战后影响</h3>
                    <div id="rome-aftermath" style="margin: 10px 0; padding: 10px; background: rgba(231, 76, 60, 0.2); border-left: 3px solid #e74c3c; border-radius: 4px;">
                        <div style="font-weight: bold; color: #e74c3c; margin-bottom: 5px;">🏛️ 罗马</div>
                        <div id="rome-morale-change" style="font-size: 14px; margin: 3px 0;"></div>
                        <div id="rome-loss-detail" style="font-size: 14px; margin: 3px 0;"></div>
                    </div>
                    <div id="carthage-aftermath" style="margin: 10px 0; padding: 10px; background: rgba(52, 152, 219, 0.2); border-left: 3px solid #3498db; border-radius: 4px;">
                        <div style="font-weight: bold; color: #3498db; margin-bottom: 5px;">🌊 迦太基</div>
                        <div id="carthage-morale-change" style="font-size: 14px; margin: 3px 0;"></div>
                        <div id="carthage-loss-detail" style="font-size: 14px; margin: 3px 0;"></div>
                    </div>
                </div>
            </div>
            <button id="victory-restart-btn" class="victory-btn">重新开始</button>
        </div>
    </div>

    <!-- 引用外部 JavaScript 文件 -->
    <script src="game.js"></script>
</body>
</html> 